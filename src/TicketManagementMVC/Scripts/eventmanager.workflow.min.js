function GetLayouts(){let n=$("#venueList").val(),t=$("#layoutList");t.empty();t.prop("SelectedIndex",0);n!==undefined&&n!==""&&$.get("/Event/GetLayouts?venueId="+n,function(n){$.each(n.layouts,function(n,i){t.append($("<option><\/option>").attr("value",i.Id).text(i.Display))})})}function readURL(n){if(n.files&&n.files[0]){let t=new FileReader;t.onload=function(n){$("#event-image").attr("src",n.target.result).width(360).height(360)};t.readAsDataURL(n.files[0])}}function GetEventsByVenue(){let n=$("#venueListToSortEvents").val(),t=$("#eventListOnEdit");t.empty();t.prop("SelectedIndex",0);n!==undefined&&n!==""&&$.getJSON("/Event/GetEventsByVenue?venueId="+n,function(n){$.each(n.events,function(n,i){t.append($("<option><\/option>").attr("value",i.Id).text(i.Display))});GetEventToEdit()})}function GetEventToEdit(){let n=$("#eventListOnEdit").val();n!==undefined&&n!==""&&n!==null?$.ajax({url:"/Event/GetEventToEdit?eventId="+n,success:function(n){$("#editEventPlaceHolder").html(n);$(".text-success").hide();$("#venueList option[value='"+$("#venueListToSortEvents").val()+"']").prop("selected",!0);$.getJSON("/Event/GetLayouts?venueId="+$("#venueList").val(),function(n){$.each(n.layouts,function(n,t){$("#layoutList").append($("<option><\/option>").attr("value",t.Id).text(t.Display))});$("#layoutList option[value='"+$("#currentLayout").val()+"']").prop("selected",!0)})},error:function(){ShowNotify("danger","server error")}}):$("#editEventPlaceHolder").html(null)}function SaveEventChanges(){var n=new FormData($("#editEventForm")[0]);$.ajax({type:"POST",url:"/Event/Edit",data:n,processData:!1,contentType:!1,cache:!1,success:function(n){if(n.success){let n=$("#eventListOnEdit option:selected").text(),t=n.replace(n.match(/.+(?=\s*\(.+\))/g),$("#title").val()+" ");$("#eventListOnEdit option:selected").text(t);$(".text-success").show()}else{$(".text-success").hide();var t="";$.each(n.errors,function(n,i){t+=i+" <br />"});$("#errorMessagesEditEvent").html(t+" <br />")}},error:function(){ShowNotify("danger","server error")}})}function CreateEvent(){$("#errorMessagesCreateEvent").hide();var n=new FormData($("#createEventForm")[0]);$.ajax({type:"POST",url:"/Event/Create",data:n,processData:!1,contentType:!1,cache:!1,success:function(n){var t,i;n.success?($(":input","#createEventForm").not(":button, :submit, :reset, :hidden").val("").prop("checked",!1),i="/Content/Images/default.jpg",$("#event-image").prop("src",i),$(".text-success").show()):($("#errorMessagesCreateEvent").hide(),t="",$.each(n.errors,function(n,i){t+=i+" <br />"}),$("#errorMessagesCreateEvent").html(t+" <br />"),$("#errorMessagesCreateEvent").show())},error:function(){ShowNotify("danger","server error")}})}function DeleteArea(n){confirm("Delete selected area?")&&$.ajax({type:"POST",url:"/Event/DeleteArea?areaId="+n,success:function(t){t.success?$("#areaTable #"+n).remove():$("#errorMessagesEditEvent").html(t.error+" <br />")},error:function(){ShowNotify("danger","server error")}})}function GetAreaToEdit(n){let t=$("#eventListOnEdit").val();t!==undefined&&t!==""&&$.ajax({url:"/Event/EditArea?eventId="+t+"&areaId="+n,success:function(n){$("#editAreaPlaceHolder").html(n);$(".text-success").hide();$("#eventPlaceHolder").hide();$("#editAreaPlaceHolder").show();$("html, body").animate({scrollTop:0},250)},error:function(){ShowNotify("danger","server error")}})}function CreateArea(){let n=$("#eventListOnEdit").val();n!==undefined&&n!==""&&$.ajax({url:"/Event/CreateArea?eventId="+n,success:function(n){$("#editAreaPlaceHolder").html(n);$(".text-success").hide();$("#eventPlaceHolder").hide();$("#editAreaPlaceHolder").show();$("html, body").animate({scrollTop:0},"slow")},error:function(){ShowNotify("danger","server error")}})}function DeleteSeat(n,t){var r,u,i;if(n!==undefined&&n!=="")for(r=$(t).parent().parent().attr("id").match(/(?!\_)\d+/g)[0],$(t).parent().parent().remove(),u=$("#seatTable > tbody > tr"),i=r;i<=u.length;i++){let n;$("#seatTable > tbody > #seatRow_"+i).find("input").each(function(){n=i-1;$(this).attr("name",$(this).attr("name").replace($(this).attr("name").match(/[(0-9)+]/g),n))});$("#seatRow_"+i).attr("id","seatRow_"+n)}}function CloseEventAreaForm(){$("#editAreaPlaceHolder").hide();$("#eventPlaceHolder").show(300);var n=$("#venueList").val(),t=$("#eventListOnEdit").val();$("#eventListOnEdit").trigger("change")}function SaveArea(n){$("#errorMessagesEditEvent").hide();$(".text-success").hide();var t;t=n=="EditArea"?"/Event/EditArea":"/Event/CreateArea";$.ajax({type:"POST",url:t,data:$("#eventAreaForm").serialize(),success:function(n){if(n.success)$("#errorMessagesEditEventArea").hide(),$(".text-success").show();else{var t="";$.each(n.errors,function(n,i){t+=i+" <br />"});$("#errorMessagesEditEventArea").html(t+" <br />")}},error:function(){ShowNotify("danger","server error")}})}function AddSeatToTable(){var t=$("#seatTable > tbody").find("tr").last().attr("id"),n,r,i;t===undefined?n=0:(r=t.match(/(?!\_)\d+/g)[0],n=parseInt(r,10)+1);i='<tr id="seatRow_'+n+'"><th class="pt-1 pb-1"><input autocomplete="off" class="form-control" type="text" name="SeatList['+n+'].Row"><\/th><td class="pt-1 pb-1"><input autocomplete="off" class="form-control" type="text" name="SeatList['+n+'].Number"><\/td><td class="pt-1 pb-1"><\/td><td class="pt-1 pb-1"><input type="button" value="X" style="width:45px;" onclick="DeleteSeat(null, this)" class="btn btn-primary" name="button"><\/td>';t===undefined?$("#seatTable > tbody").append(i):$(i).insertAfter("#seatTable > tbody > #"+t)}function DeleteEvent(n){confirm("Delete event?")&&$.ajax({type:"POST",url:"/Event/DeleteEvent?eventId="+n,success:function(n){n.success?location.href="/Home/Index":$("#errorMessagesEditEvent").html(n.error+" <br />")},error:function(){ShowNotify("danger","server error")}})}function SetDatePickerCulture(n,t){$(n).datepicker($.extend({changeMonth:!0,changeYear:!0,minDate:new Date},$.datepicker.regional[t]))}function SetTimePicker(n,t){let i;t=="en"&&(i={timeFormat:"hh:mm p"});t=="ru"|t=="be"&&(i={timeFormat:"HH:mm"});$(n).timepicker(i)}